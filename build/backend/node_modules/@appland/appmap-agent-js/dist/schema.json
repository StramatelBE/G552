[
  {
    "$id": "agent-cooked",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "directory",
      "package"
    ],
    "properties": {
      "directory": {
        "$ref": "url"
      },
      "package": {
        "$ref": "package"
      }
    }
  },
  {
    "$id": "agent",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "directory",
      "package"
    ],
    "properties": {
      "directory": {
        "$ref": "path"
      },
      "package": {
        "$ref": "package"
      }
    }
  },
  {
    "$id": "basename",
    "type": "string",
    "pattern": "^[^/.]+$"
  },
  {
    "$id": "combinator",
    "enum": [
      "and",
      "or"
    ]
  },
  {
    "$id": "command-cooked",
    "type": "object",
    "additionalProperties": false,
    "nullable": true,
    "properties": {
      "tokens": {
        "type": "array",
        "nullable": true,
        "items": {
          "type": "string"
        }
      },
      "source": {
        "type": "string",
        "nullable": true
      }
    }
  },
  {
    "$id": "command-options-cooked",
    "allOf": [
      {
        "$ref": "command-options"
      },
      {
        "type": "object",
        "required": [
          "shell",
          "cwd",
          "encoding",
          "env",
          "stdio",
          "timeout",
          "killSignal"
        ]
      }
    ]
  },
  {
    "$id": "command-options",
    "type": "object",
    "additionalProperties": false,
    "properties": {
      "shell": {
        "anyOf": [
          {
            "type": "boolean"
          },
          {
            "type": "string"
          }
        ]
      },
      "cwd": {
        "$ref": "path"
      },
      "encoding": {
        "$ref": "encoding"
      },
      "env": {
        "$ref": "env"
      },
      "stdio": {
        "$ref": "stdio"
      },
      "timeout": {
        "type": "integer",
        "minimum": 0
      },
      "killSignal": {
        "$ref": "signal"
      }
    }
  },
  {
    "$id": "command",
    "anyOf": [
      {
        "type": "string"
      },
      {
        "type": "array",
        "items": {
          "type": "string"
        }
      }
    ]
  },
  {
    "$id": "config",
    "$ref": "configuration-external"
  },
  {
    "$id": "configuration-external",
    "type": "object",
    "properties": {
      "agent": {
        "$ref": "agent"
      },
      "repository": {
        "$ref": "repository"
      },
      "scenarios": {
        "type": "object",
        "additionalProperties": false,
        "patternProperties": {
          "^": {
            "$ref": "configuration-external"
          }
        }
      },
      "scenario": {
        "$ref": "regexp"
      },
      "recursive-process-recording": {
        "type": "boolean"
      },
      "command": {
        "$ref": "command"
      },
      "command-win32": {
        "$ref": "command"
      },
      "command-options": {
        "$ref": "command-options"
      },
      "validate": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "message": {
            "type": "boolean"
          },
          "appmap": {
            "type": "boolean"
          }
        }
      },
      "log": {
        "$ref": "log"
      },
      "host": {
        "const": "localhost"
      },
      "session": {
        "$ref": "session"
      },
      "sessions": {
        "$ref": "regexp"
      },
      "proxy-port": {
        "$ref": "port-proxy"
      },
      "trace-port": {
        "$ref": "port"
      },
      "trace-protocol": {
        "const": "TCP"
      },
      "http-switch": {
        "$ref": "url-component"
      },
      "track-port": {
        "$ref": "port"
      },
      "track-protocol": {
        "const": "HTTP/1.1"
      },
      "intercept-track-port": {
        "$ref": "regexp"
      },
      "intercept-track-protocol": {
        "const": "HTTP/1.1"
      },
      "socket": {
        "$ref": "socket"
      },
      "heartbeat": {
        "$ref": "heartbeat"
      },
      "threshold": {
        "$ref": "threshold"
      },
      "recorder": {
        "$ref": "recorder"
      },
      "inline-source": {
        "type": "boolean"
      },
      "postmortem-function-exclusion": {
        "type": "boolean",
        "nullable": true
      },
      "hooks": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "cjs": {
            "type": "boolean"
          },
          "esm": {
            "type": "boolean"
          },
          "eval": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                  "hidden": {
                    "$ref": "identifier"
                  },
                  "aliases": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            ]
          },
          "apply": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "const": null
              },
              {
                "$ref": "identifier"
              }
            ]
          },
          "http": {
            "type": "boolean"
          },
          "mysql": {
            "type": "boolean",
            "nullable": true
          },
          "pg": {
            "type": "boolean",
            "nullable": true
          },
          "sqlite3": {
            "type": "boolean",
            "nullable": true
          }
        }
      },
      "ordering": {
        "$ref": "ordering"
      },
      "default-process": {
        "anyOf": [
          {
            "type": "boolean"
          },
          {
            "$ref": "process"
          }
        ]
      },
      "processes": {
        "anyOf": [
          {
            "$ref": "matcher-process"
          },
          {
            "type": "array",
            "items": {
              "$ref": "matcher-process"
            }
          }
        ]
      },
      "main": {
        "$ref": "path"
      },
      "engine": {
        "type": "string"
      },
      "language": {
        "$ref": "language"
      },
      "default-package": {
        "$ref": "module"
      },
      "packages": {
        "anyOf": [
          {
            "$ref": "matcher-module"
          },
          {
            "type": "array",
            "items": {
              "$ref": "matcher-module"
            }
          }
        ]
      },
      "exclude": {
        "$ref": "exclude"
      },
      "collapse-package-hierachy": {
        "type": "boolean"
      },
      "recording": {
        "$ref": "recording"
      },
      "serialization": {
        "$ref": "serialization"
      },
      "pruning": {
        "type": "boolean"
      },
      "appmap_dir": {
        "$ref": "path"
      },
      "appmap_file": {
        "$ref": "basename"
      },
      "name": {
        "type": "string"
      },
      "map-name": {
        "type": "string"
      },
      "feature": {
        "type": "string"
      },
      "feature-group": {
        "type": "string"
      },
      "labels": {
        "type": "array",
        "items": {
          "type": "string"
        }
      },
      "frameworks": {
        "type": "array",
        "items": {
          "$ref": "name-version"
        }
      }
    }
  },
  {
    "$id": "configuration-internal",
    "type": "object",
    "additionalProperties": false,
    "minProperties": 42,
    "properties": {
      "socket": {
        "$ref": "socket"
      },
      "heartbeat": {
        "$ref": "heartbeat"
      },
      "threshold": {
        "$ref": "threshold"
      },
      "scenario": {
        "$ref": "regexp"
      },
      "scenarios": {
        "type": "array",
        "items": {
          "type": "object",
          "additionalProperties": false,
          "required": [
            "key",
            "value",
            "base"
          ],
          "properties": {
            "key": {
              "type": "string"
            },
            "value": {
              "$ref": "configuration-external"
            },
            "base": {
              "$ref": "url"
            }
          }
        }
      },
      "recursive-process-recording": {
        "type": "boolean"
      },
      "command": {
        "$ref": "command-cooked"
      },
      "command-win32": {
        "$ref": "command-cooked"
      },
      "command-options": {
        "$ref": "command-options-cooked"
      },
      "validate": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "message",
          "appmap"
        ],
        "properties": {
          "message": {
            "type": "boolean"
          },
          "appmap": {
            "type": "boolean"
          }
        }
      },
      "agent": {
        "anyOf": [
          {
            "const": null
          },
          {
            "$ref": "agent-cooked"
          }
        ]
      },
      "repository": {
        "$ref": "repository"
      },
      "log": {
        "$ref": "log-cooked"
      },
      "host": {
        "const": "localhost"
      },
      "session": {
        "anyOf": [
          {
            "const": null
          },
          {
            "$ref": "session"
          }
        ]
      },
      "sessions": {
        "$ref": "regexp"
      },
      "proxy-port": {
        "$ref": "port-proxy"
      },
      "trace-port": {
        "$ref": "port-cooked"
      },
      "trace-protocol": {
        "const": "TCP"
      },
      "http-switch": {
        "$ref": "url-component"
      },
      "track-port": {
        "$ref": "port-cooked"
      },
      "track-protocol": {
        "const": "HTTP/1.1"
      },
      "intercept-track-port": {
        "$ref": "regexp"
      },
      "intercept-track-protocol": {
        "const": "HTTP/1.1"
      },
      "recorder": {
        "anyOf": [
          {
            "const": null
          },
          {
            "$ref": "recorder"
          }
        ]
      },
      "inline-source": {
        "type": "boolean"
      },
      "postmortem-function-exclusion": {
        "type": "boolean",
        "nullable": true
      },
      "hooks": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "cjs",
          "esm",
          "eval",
          "apply",
          "http",
          "mysql",
          "pg",
          "sqlite3"
        ],
        "properties": {
          "cjs": {
            "type": "boolean"
          },
          "esm": {
            "type": "boolean"
          },
          "eval": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "hidden": {
                "$ref": "identifier"
              },
              "aliases": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            }
          },
          "apply": {
            "anyOf": [
              {
                "const": null
              },
              {
                "$ref": "identifier"
              }
            ]
          },
          "http": {
            "type": "boolean"
          },
          "mysql": {
            "type": "boolean",
            "nullable": true
          },
          "pg": {
            "type": "boolean",
            "nullable": true
          },
          "sqlite3": {
            "type": "boolean",
            "nullable": true
          }
        }
      },
      "ordering": {
        "$ref": "ordering"
      },
      "default-process": {
        "$ref": "process"
      },
      "processes": {
        "type": "array",
        "items": {
          "type": "array",
          "minItems": 2,
          "maxItems": 2,
          "items": [
            {
              "$ref": "matcher-cooked"
            },
            {
              "$ref": "process"
            }
          ]
        }
      },
      "main": {
        "anyOf": [
          {
            "const": null
          },
          {
            "$ref": "url"
          }
        ]
      },
      "engine": {
        "type": "string",
        "nullable": true
      },
      "language": {
        "$ref": "language"
      },
      "default-package": {
        "$ref": "module-cooked"
      },
      "packages": {
        "type": "array",
        "items": {
          "type": "array",
          "minItems": 2,
          "maxItems": 2,
          "items": [
            {
              "$ref": "matcher-cooked"
            },
            {
              "$ref": "module-cooked"
            }
          ]
        }
      },
      "exclude": {
        "$ref": "exclude-cooked"
      },
      "collapse-package-hierachy": {
        "type": "boolean"
      },
      "recording": {
        "anyOf": [
          {
            "const": null
          },
          {
            "$ref": "recording-object"
          }
        ]
      },
      "serialization": {
        "allOf": [
          {
            "$ref": "serialization"
          },
          {
            "type": "object",
            "required": [
              "maximum-print-length",
              "maximum-properties-length",
              "impure-printing",
              "impure-constructor-naming",
              "impure-array-inspection",
              "impure-error-inspection",
              "impure-hash-inspection"
            ]
          }
        ]
      },
      "pruning": {
        "type": "boolean"
      },
      "appmap_dir": {
        "$ref": "url"
      },
      "appmap_file": {
        "anyOf": [
          {
            "$ref": "basename"
          },
          {
            "const": null
          }
        ]
      },
      "name": {
        "type": "string",
        "nullable": true
      },
      "map-name": {
        "type": "string",
        "nullable": true
      },
      "feature": {
        "type": "string",
        "nullable": true
      },
      "feature-group": {
        "type": "string",
        "nullable": true
      },
      "labels": {
        "type": "array",
        "items": {
          "type": "string"
        }
      },
      "frameworks": {
        "type": "array",
        "items": {
          "$ref": "name-version"
        }
      }
    }
  },
  {
    "$id": "criteria",
    "anyOf": [
      {
        "type": "boolean"
      },
      {
        "type": "string"
      }
    ]
  },
  {
    "$id": "encoding",
    "enum": [
      "buffer",
      "utf8",
      "utf16le",
      "latin1"
    ]
  },
  {
    "$id": "env",
    "type": "object",
    "additionalProperties": false,
    "patternProperties": {
      "^": {
        "type": "string"
      }
    }
  },
  {
    "$id": "exclude-cooked",
    "type": "array",
    "items": {
      "$ref": "exclusion-cooked"
    }
  },
  {
    "$id": "exclude",
    "type": "array",
    "items": {
      "$ref": "exclusion"
    }
  },
  {
    "$id": "exclusion-cooked",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "combinator",
      "qualified-name",
      "name",
      "every-label",
      "some-label",
      "excluded",
      "recursive"
    ],
    "properties": {
      "combinator": {
        "$ref": "combinator"
      },
      "qualified-name": {
        "$ref": "criteria"
      },
      "name": {
        "$ref": "criteria"
      },
      "every-label": {
        "$ref": "criteria"
      },
      "some-label": {
        "$ref": "criteria"
      },
      "excluded": {
        "type": "boolean"
      },
      "recursive": {
        "type": "boolean"
      }
    }
  },
  {
    "$id": "exclusion",
    "anyOf": [
      {
        "type": "string"
      },
      {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "combinator": {
            "$ref": "combinator"
          },
          "qualified-name": {
            "$ref": "criteria"
          },
          "name": {
            "$ref": "criteria"
          },
          "every-label": {
            "$ref": "criteria"
          },
          "some-label": {
            "$ref": "criteria"
          },
          "excluded": {
            "type": "boolean"
          },
          "recursive": {
            "type": "boolean"
          }
        }
      }
    ]
  },
  {
    "$id": "group",
    "type": "number"
  },
  {
    "$id": "headers",
    "type": "object",
    "additionalProperties": false,
    "patternProperties": {
      "^": {
        "type": "string"
      }
    }
  },
  {
    "$id": "heartbeat",
    "$ref": "natural-nullable"
  },
  {
    "$id": "identifier",
    "type": "string",
    "pattern": "^[a-zA-Z_$][a-zA-Z_$-9]*$"
  },
  {
    "$id": "language",
    "const": "javascript"
  },
  {
    "$id": "log-cooked",
    "type": "object",
    "additionalProperties": false,
    "properties": {
      "level": {
        "$ref": "log-level"
      },
      "file": {
        "anyOf": [
          {
            "$ref": "url"
          },
          {
            "const": 1
          },
          {
            "const": 2
          }
        ]
      }
    }
  },
  {
    "$id": "log-level",
    "enum": [
      "debug",
      "info",
      "warning",
      "error",
      "off"
    ]
  },
  {
    "$id": "log",
    "anyOf": [
      {
        "$ref": "log-level"
      },
      {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "level": {
            "$ref": "log-level"
          },
          "file": {
            "anyOf": [
              {
                "$ref": "path"
              },
              {
                "const": 1
              },
              {
                "const": 2
              }
            ]
          }
        }
      }
    ]
  },
  {
    "$id": "matcher-cooked",
    "anyOf": [
      {
        "type": "boolean"
      },
      {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "base",
          "source",
          "flags"
        ],
        "properties": {
          "base": {
            "anyOf": [
              {
                "const": null
              },
              {
                "$ref": "url"
              }
            ]
          },
          "source": {
            "type": "string"
          },
          "flags": {
            "type": "string"
          }
        }
      }
    ]
  },
  {
    "$id": "matcher-module",
    "anyOf": [
      {
        "type": "string"
      },
      {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "regexp"
        ],
        "properties": {
          "regexp": {
            "$ref": "regexp"
          },
          "flags": {
            "type": "string"
          },
          "relative": {
            "type": "boolean"
          },
          "enabled": {
            "type": "boolean"
          },
          "shallow": {
            "type": "boolean"
          },
          "exclude": {
            "$ref": "exclude"
          },
          "inline-source": {
            "type": "boolean",
            "nullable": true
          },
          "source-type": {
            "$ref": "source-type"
          },
          "parsing": {
            "$ref": "parsing"
          }
        }
      },
      {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "glob"
        ],
        "properties": {
          "glob": {
            "type": "string"
          },
          "enabled": {
            "type": "boolean"
          },
          "shallow": {
            "type": "boolean"
          },
          "exclude": {
            "$ref": "exclude"
          },
          "inline-source": {
            "type": "boolean",
            "nullable": true
          },
          "source-type": {
            "$ref": "source-type"
          },
          "parsing": {
            "$ref": "parsing"
          }
        }
      },
      {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "path"
        ],
        "properties": {
          "path": {
            "type": "string"
          },
          "recursive": {
            "type": "boolean"
          },
          "enabled": {
            "type": "boolean"
          },
          "shallow": {
            "type": "boolean"
          },
          "exclude": {
            "$ref": "exclude"
          },
          "inline-source": {
            "type": "boolean",
            "nullable": true
          },
          "source-type": {
            "$ref": "source-type"
          },
          "parsing": {
            "$ref": "parsing"
          }
        }
      },
      {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "dist"
        ],
        "properties": {
          "dist": {
            "type": "string"
          },
          "recursive": {
            "type": "boolean"
          },
          "external": {
            "type": "boolean"
          },
          "enabled": {
            "type": "boolean"
          },
          "shallow": {
            "type": "boolean"
          },
          "exclude": {
            "$ref": "exclude"
          },
          "inline-source": {
            "type": "boolean",
            "nullable": true
          },
          "source-type": {
            "$ref": "source-type"
          },
          "parsing": {
            "$ref": "parsing"
          }
        }
      },
      {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "url"
        ],
        "properties": {
          "url": {
            "type": "string"
          },
          "recursive": {
            "type": "boolean"
          },
          "enabled": {
            "type": "boolean"
          },
          "shallow": {
            "type": "boolean"
          },
          "exclude": {
            "$ref": "exclude"
          },
          "inline-source": {
            "type": "boolean",
            "nullable": true
          },
          "source-type": {
            "$ref": "source-type"
          },
          "parsing": {
            "$ref": "parsing"
          }
        }
      }
    ]
  },
  {
    "$id": "matcher-process",
    "anyOf": [
      {
        "type": "string"
      },
      {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "regexp"
        ],
        "properties": {
          "regexp": {
            "$ref": "regexp"
          },
          "flags": {
            "type": "string"
          },
          "relative": {
            "type": "boolean"
          },
          "enabled": {
            "type": "boolean"
          }
        }
      },
      {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "glob"
        ],
        "properties": {
          "glob": {
            "type": "string"
          },
          "enabled": {
            "type": "boolean"
          }
        }
      },
      {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "path"
        ],
        "properties": {
          "path": {
            "type": "string"
          },
          "recursive": {
            "type": "boolean"
          },
          "enabled": {
            "type": "boolean"
          }
        }
      },
      {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "dist"
        ],
        "properties": {
          "dist": {
            "type": "string"
          },
          "recursive": {
            "type": "boolean"
          },
          "external": {
            "type": "boolean"
          },
          "enabled": {
            "type": "boolean"
          }
        }
      },
      {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "url"
        ],
        "properties": {
          "url": {
            "type": "string"
          },
          "recursive": {
            "type": "boolean"
          },
          "enabled": {
            "type": "boolean"
          }
        }
      }
    ]
  },
  {
    "$id": "message-amend",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type",
      "session",
      "site",
      "tab",
      "payload"
    ],
    "properties": {
      "type": {
        "const": "amend"
      },
      "session": {
        "$ref": "session"
      },
      "site": {
        "$ref": "site"
      },
      "tab": {
        "$ref": "tab"
      },
      "payload": {
        "$ref": "payload"
      }
    }
  },
  {
    "$id": "message-error",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type",
      "session",
      "error"
    ],
    "properties": {
      "type": {
        "const": "error"
      },
      "session": {
        "$ref": "session"
      },
      "error": {
        "$ref": "serial"
      }
    }
  },
  {
    "$id": "message-event",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type",
      "session",
      "site",
      "tab",
      "group",
      "time",
      "payload"
    ],
    "properties": {
      "type": {
        "const": "event"
      },
      "session": {
        "$ref": "session"
      },
      "site": {
        "$ref": "site"
      },
      "tab": {
        "$ref": "tab"
      },
      "group": {
        "$ref": "group"
      },
      "time": {
        "type": "number"
      },
      "payload": {
        "$ref": "payload"
      }
    }
  },
  {
    "$id": "message-group",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type",
      "session",
      "group",
      "child",
      "description"
    ],
    "properties": {
      "type": {
        "const": "group"
      },
      "session": {
        "$ref": "session"
      },
      "group": {
        "$ref": "group"
      },
      "child": {
        "$ref": "group"
      },
      "description": {
        "type": "string"
      }
    }
  },
  {
    "$id": "message-source",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type",
      "url",
      "content"
    ],
    "properties": {
      "type": {
        "const": "source"
      },
      "url": {
        "$ref": "url"
      },
      "content": {
        "type": "string",
        "nullable": true
      }
    }
  },
  {
    "$id": "message-start",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type",
      "track",
      "configuration"
    ],
    "properties": {
      "type": {
        "const": "start"
      },
      "track": {
        "type": "string"
      },
      "configuration": {
        "$ref": "configuration-internal"
      }
    }
  },
  {
    "$id": "message-stop",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type",
      "track",
      "termination"
    ],
    "properties": {
      "type": {
        "const": "stop"
      },
      "track": {
        "type": "string",
        "nullable": true
      },
      "termination": {
        "$ref": "termination"
      }
    }
  },
  {
    "$id": "message",
    "anyOf": [
      {
        "$ref": "message-amend"
      },
      {
        "$ref": "message-error"
      },
      {
        "$ref": "message-event"
      },
      {
        "$ref": "message-group"
      },
      {
        "$ref": "message-source"
      },
      {
        "$ref": "message-start"
      },
      {
        "$ref": "message-stop"
      }
    ]
  },
  {
    "$id": "module-cooked",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "enabled",
      "shallow",
      "inline-source",
      "exclude",
      "parsing"
    ],
    "properties": {
      "enabled": {
        "type": "boolean"
      },
      "shallow": {
        "type": "boolean"
      },
      "inline-source": {
        "type": "boolean",
        "nullable": true
      },
      "exclude": {
        "$ref": "exclude-cooked"
      },
      "source-type": {
        "$ref": "source-type"
      },
      "parsing": {
        "$ref": "parsing"
      }
    }
  },
  {
    "$id": "module",
    "anyOf": [
      {
        "type": "boolean"
      },
      {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "enabled": {
            "type": "boolean"
          },
          "shallow": {
            "type": "boolean"
          },
          "inline-source": {
            "type": "boolean",
            "nullable": true
          },
          "exclude": {
            "$ref": "exclude"
          },
          "source-type": {
            "$ref": "source-type"
          },
          "parsing": {
            "$ref": "parsing"
          }
        }
      }
    ]
  },
  {
    "$id": "name-version-object",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "name",
      "version"
    ],
    "properties": {
      "name": {
        "type": "string"
      },
      "version": {
        "type": "string",
        "nullable": true
      }
    }
  },
  {
    "$id": "name-version-string",
    "type": "string",
    "pattern": "^[^@]+(@[^@]+)?$"
  },
  {
    "$id": "name-version",
    "anyOf": [
      {
        "$ref": "name-version-string"
      },
      {
        "$ref": "name-version-object"
      }
    ]
  },
  {
    "$id": "natural-nullable",
    "anyOf": [
      {
        "const": null
      },
      {
        "$ref": "natural"
      }
    ]
  },
  {
    "$id": "natural",
    "type": "integer",
    "minimum": 0,
    "maximum": 9007199254740991
  },
  {
    "$id": "ordering",
    "enum": [
      "chronological",
      "causal"
    ]
  },
  {
    "$id": "package",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "name",
      "version",
      "homepage"
    ],
    "properties": {
      "name": {
        "type": "string"
      },
      "version": {
        "type": "string"
      },
      "homepage": {
        "type": "string",
        "nullable": true
      }
    }
  },
  {
    "$id": "parsing",
    "type": "array",
    "nullable": true,
    "items": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "array",
          "minItems": 2,
          "maxItems": 2,
          "items": [
            {
              "type": "string"
            },
            {
              "type": "object"
            }
          ]
        }
      ]
    }
  },
  {
    "$id": "path",
    "type": "string"
  },
  {
    "$id": "payload-answer",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type"
    ],
    "properties": {
      "type": {
        "const": "answer"
      }
    }
  },
  {
    "$id": "payload-apply",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type",
      "function",
      "this",
      "arguments"
    ],
    "properties": {
      "type": {
        "const": "apply"
      },
      "function": {
        "type": "string"
      },
      "this": {
        "$ref": "serial"
      },
      "arguments": {
        "type": "array",
        "items": {
          "$ref": "serial"
        }
      }
    }
  },
  {
    "$id": "payload-await",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type",
      "promise"
    ],
    "properties": {
      "type": {
        "const": "await"
      },
      "promise": {
        "$ref": "serial"
      }
    }
  },
  {
    "$id": "payload-bundle",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type"
    ],
    "properties": {
      "type": {
        "const": "bundle"
      }
    }
  },
  {
    "$id": "payload-group",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type",
      "group",
      "description"
    ],
    "properties": {
      "type": {
        "const": "group"
      },
      "group": {
        "$ref": "group"
      },
      "description": {
        "type": "string"
      }
    }
  },
  {
    "$id": "payload-jump",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type"
    ],
    "properties": {
      "type": {
        "const": "jump"
      }
    }
  },
  {
    "$id": "payload-query",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type",
      "database",
      "version",
      "sql",
      "parameters"
    ],
    "properties": {
      "type": {
        "const": "query"
      },
      "database": {
        "type": "string",
        "nullable": true
      },
      "version": {
        "type": "string",
        "nullable": true
      },
      "sql": {
        "type": "string"
      },
      "parameters": {
        "anyOf": [
          {
            "type": "array",
            "items": {
              "$ref": "serial"
            }
          },
          {
            "type": "object",
            "additionalProperties": false,
            "patternProperties": {
              "^": {
                "$ref": "serial"
              }
            }
          }
        ]
      }
    }
  },
  {
    "$id": "payload-reject",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type",
      "error"
    ],
    "properties": {
      "type": {
        "const": "reject"
      },
      "error": {
        "$ref": "serial"
      }
    }
  },
  {
    "$id": "payload-request",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type",
      "side",
      "protocol",
      "method",
      "url",
      "route",
      "headers",
      "body"
    ],
    "properties": {
      "type": {
        "const": "request"
      },
      "side": {
        "$ref": "side"
      },
      "protocol": {
        "type": "string"
      },
      "method": {
        "type": "string"
      },
      "url": {
        "type": "string"
      },
      "route": {
        "type": "string",
        "nullable": true
      },
      "headers": {
        "$ref": "headers"
      },
      "body": {
        "$ref": "serial"
      }
    }
  },
  {
    "$id": "payload-resolve",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type",
      "result"
    ],
    "properties": {
      "type": {
        "const": "resolve"
      },
      "result": {
        "$ref": "serial"
      }
    }
  },
  {
    "$id": "payload-response",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type",
      "side",
      "status",
      "message",
      "headers",
      "body"
    ],
    "properties": {
      "type": {
        "const": "response"
      },
      "side": {
        "$ref": "side"
      },
      "status": {
        "type": "integer"
      },
      "message": {
        "type": "string"
      },
      "headers": {
        "$ref": "headers"
      },
      "body": {
        "$ref": "serial"
      }
    }
  },
  {
    "$id": "payload-return",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type",
      "function",
      "result"
    ],
    "properties": {
      "type": {
        "const": "return"
      },
      "function": {
        "type": "string"
      },
      "result": {
        "$ref": "serial"
      }
    }
  },
  {
    "$id": "payload-throw",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type",
      "function",
      "error"
    ],
    "properties": {
      "type": {
        "const": "throw"
      },
      "function": {
        "type": "string"
      },
      "error": {
        "$ref": "serial"
      }
    }
  },
  {
    "$id": "payload-ungroup",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type",
      "group"
    ],
    "properties": {
      "type": {
        "const": "ungroup"
      },
      "group": {
        "$ref": "group"
      }
    }
  },
  {
    "$id": "payload-yield",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type",
      "iterator"
    ],
    "properties": {
      "type": {
        "const": "yield"
      },
      "iterator": {
        "$ref": "serial"
      }
    }
  },
  {
    "$id": "payload",
    "anyOf": [
      {
        "$ref": "payload-answer"
      },
      {
        "$ref": "payload-apply"
      },
      {
        "$ref": "payload-await"
      },
      {
        "$ref": "payload-bundle"
      },
      {
        "$ref": "payload-group"
      },
      {
        "$ref": "payload-jump"
      },
      {
        "$ref": "payload-query"
      },
      {
        "$ref": "payload-reject"
      },
      {
        "$ref": "payload-request"
      },
      {
        "$ref": "payload-resolve"
      },
      {
        "$ref": "payload-response"
      },
      {
        "$ref": "payload-return"
      },
      {
        "$ref": "payload-throw"
      },
      {
        "$ref": "payload-ungroup"
      },
      {
        "$ref": "payload-yield"
      }
    ]
  },
  {
    "$id": "port-cooked",
    "anyOf": [
      {
        "const": 0
      },
      {
        "const": ""
      },
      {
        "$ref": "port-number"
      },
      {
        "$ref": "url"
      }
    ]
  },
  {
    "$id": "port-number",
    "type": "integer",
    "minimum": 1,
    "maximum": 65535
  },
  {
    "$id": "port-proxy",
    "anyOf": [
      {
        "const": null
      },
      {
        "const": 0
      },
      {
        "$ref": "port-number"
      }
    ]
  },
  {
    "$id": "port",
    "anyOf": [
      {
        "const": 0
      },
      {
        "const": ""
      },
      {
        "$ref": "port-number"
      },
      {
        "$ref": "path"
      }
    ]
  },
  {
    "$id": "process",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "enabled"
    ],
    "properties": {
      "enabled": {
        "type": "boolean"
      }
    }
  },
  {
    "$id": "recorder",
    "enum": [
      "process",
      "mocha",
      "jest",
      "manual",
      "remote"
    ]
  },
  {
    "$id": "recording-object",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "defined-class",
      "method-id"
    ],
    "properties": {
      "defined-class": {
        "type": "string"
      },
      "method-id": {
        "type": "string"
      }
    }
  },
  {
    "$id": "recording-string",
    "type": "string",
    "pattern": "^[^.]+.[^.]+$"
  },
  {
    "$id": "recording",
    "anyOf": [
      {
        "$ref": "recording-string"
      },
      {
        "$ref": "recording-object"
      }
    ]
  },
  {
    "$id": "regexp",
    "type": "string"
  },
  {
    "$id": "repository",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "directory",
      "history",
      "package"
    ],
    "properties": {
      "directory": {
        "$ref": "url"
      },
      "history": {
        "type": "object",
        "nullable": true
      },
      "package": {
        "anyOf": [
          {
            "const": null
          },
          {
            "$ref": "package"
          }
        ]
      }
    }
  },
  {
    "$id": "serial-primitive",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type",
      "print"
    ],
    "properties": {
      "type": {
        "enum": [
          "null",
          "undefined",
          "boolean",
          "number",
          "string",
          "bigint"
        ]
      },
      "print": {
        "type": "string"
      }
    }
  },
  {
    "$id": "serial-reference",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type",
      "print",
      "index",
      "constructor",
      "specific"
    ],
    "properties": {
      "type": {
        "enum": [
          "object",
          "function"
        ]
      },
      "print": {
        "type": "string"
      },
      "index": {
        "$ref": "natural"
      },
      "constructor": {
        "type": "string",
        "nullable": true
      },
      "specific": {
        "$ref": "specific"
      }
    }
  },
  {
    "$id": "serial-symbol",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type",
      "print",
      "index"
    ],
    "properties": {
      "type": {
        "const": "symbol"
      },
      "print": {
        "type": "string"
      },
      "index": {
        "$ref": "natural"
      }
    }
  },
  {
    "$id": "serial",
    "anyOf": [
      {
        "const": null
      },
      {
        "$ref": "serial-primitive"
      },
      {
        "$ref": "serial-reference"
      },
      {
        "$ref": "serial-symbol"
      }
    ]
  },
  {
    "$id": "serialization",
    "type": "object",
    "additionalProperties": false,
    "properties": {
      "maximum-print-length": {
        "type": "number",
        "nullable": true,
        "minimum": 0
      },
      "maximum-properties-length": {
        "type": "number",
        "nullable": true,
        "minimum": 0
      },
      "impure-printing": {
        "type": "boolean"
      },
      "impure-constructor-naming": {
        "type": "boolean"
      },
      "impure-array-inspection": {
        "type": "boolean"
      },
      "impure-error-inspection": {
        "type": "boolean"
      },
      "impure-hash-inspection": {
        "type": "boolean"
      }
    }
  },
  {
    "$id": "session",
    "type": "string"
  },
  {
    "$id": "side",
    "enum": [
      "client",
      "server"
    ]
  },
  {
    "$id": "signal",
    "enum": [
      "SIGINT",
      "SIGTERM",
      "SIGKILL"
    ]
  },
  {
    "$id": "site",
    "enum": [
      "begin",
      "end",
      "before",
      "after"
    ]
  },
  {
    "$id": "socket",
    "enum": [
      "unix",
      "net"
    ]
  },
  {
    "$id": "source-map",
    "type": "object",
    "required": [
      "version",
      "sources",
      "names",
      "mappings"
    ],
    "properties": {
      "version": {
        "const": 3
      },
      "file": {
        "type": "string",
        "nullable": true
      },
      "sourceRoot": {
        "type": "string",
        "nullable": true
      },
      "sources": {
        "type": "array",
        "items": {
          "type": "string"
        }
      },
      "sourcesContent": {
        "type": "array",
        "nullable": true,
        "items": {
          "type": "string",
          "nullable": true
        }
      },
      "names": {
        "type": "array",
        "items": {
          "type": "string"
        }
      },
      "mappings": {
        "type": "string"
      }
    }
  },
  {
    "$id": "source-type",
    "enum": [
      null,
      "script",
      "module"
    ]
  },
  {
    "$id": "specific-array",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type",
      "length"
    ],
    "properties": {
      "type": {
        "const": "array"
      },
      "length": {
        "$ref": "natural"
      }
    }
  },
  {
    "$id": "specific-error",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type",
      "name",
      "message",
      "stack"
    ],
    "properties": {
      "type": {
        "const": "error"
      },
      "name": {
        "type": "string",
        "nullable": true
      },
      "message": {
        "type": "string",
        "nullable": true
      },
      "stack": {
        "type": "string",
        "nullable": true
      }
    }
  },
  {
    "$id": "specific-hash",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type",
      "length",
      "properties"
    ],
    "properties": {
      "type": {
        "const": "hash"
      },
      "length": {
        "$ref": "natural"
      },
      "properties": {
        "type": "object",
        "additionalProperties": false,
        "patternProperties": {
          "^": {
            "type": "string"
          }
        }
      }
    }
  },
  {
    "$id": "specific",
    "anyOf": [
      {
        "const": null
      },
      {
        "$ref": "specific-array"
      },
      {
        "$ref": "specific-error"
      },
      {
        "$ref": "specific-hash"
      }
    ]
  },
  {
    "$id": "stdio-stream",
    "enum": [
      "ignore",
      "pipe",
      "inherit"
    ]
  },
  {
    "$id": "stdio",
    "anyOf": [
      {
        "$ref": "stdio-stream"
      },
      {
        "type": "array",
        "minItems": 3,
        "maxItems": 3,
        "items": [
          {
            "$ref": "stdio-stream"
          },
          {
            "$ref": "stdio-stream"
          },
          {
            "$ref": "stdio-stream"
          }
        ]
      }
    ]
  },
  {
    "$id": "tab",
    "$ref": "natural"
  },
  {
    "$id": "termination-disconnect",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type"
    ],
    "properties": {
      "type": {
        "const": "disconnect"
      }
    }
  },
  {
    "$id": "termination-exit",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type",
      "status"
    ],
    "properties": {
      "type": {
        "const": "exit"
      },
      "status": {
        "type": "integer",
        "minimum": 0,
        "maximum": 255
      }
    }
  },
  {
    "$id": "termination-manual",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type"
    ],
    "properties": {
      "type": {
        "const": "manual"
      }
    }
  },
  {
    "$id": "termination-test",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type",
      "passed"
    ],
    "properties": {
      "type": {
        "const": "test"
      },
      "passed": {
        "type": "boolean"
      }
    }
  },
  {
    "$id": "termination-unknown",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "type"
    ],
    "properties": {
      "type": {
        "const": "unknown"
      }
    }
  },
  {
    "$id": "termination",
    "anyOf": [
      {
        "$ref": "termination-exit"
      },
      {
        "$ref": "termination-disconnect"
      },
      {
        "$ref": "termination-test"
      },
      {
        "$ref": "termination-manual"
      },
      {
        "$ref": "termination-unknown"
      }
    ]
  },
  {
    "$id": "threshold",
    "$ref": "natural-nullable"
  },
  {
    "$id": "url-component",
    "type": "string",
    "pattern": "[A–Za–z0–9\\-_.!~*'()]+"
  },
  {
    "$id": "url",
    "type": "string",
    "pattern": "^([a-z]+://|data:)"
  }
]